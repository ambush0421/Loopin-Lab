# Design: 부동산 견적서 자동 생성 시스템 (Building Report)

## 1. UI/UX 설계 (Mockup)

### 1.1 메인 레이아웃 (Main Layout)
보고서는 A4 규격에 최적화된 2단 또는 1단 레이아웃을 사용합니다.

```
┌──────────────────────────────────────────────────────────┐
│ [Report Title: 건축물 분석 보고서]         [Date: 2026.02.08] │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  ┌────────────────────────────────────────────────────┐  │
│  │ [Address: 서울특별시 중구 세종대로 110]              │  │
│  └────────────────────────────────────────────────────┘  │
│                                                          │
│  ┌──────────────────────────┐  ┌─────────────────────────┐ │
│  │ [Section: 기본 개요]      │  │ [Section: 핵심 지표]     │ │
│  │ - 대지면적: 1,000㎡       │  │ - 용적률: 250%          │ │
│  │ - 연면적: 2,500㎡         │  │ - 건폐율: 50%           │ │
│  │ - 주용도: 업무시설         │  │ - 위반여부: [정상]       │ │
│  └──────────────────────────┘  └─────────────────────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐  │
│  │ [Section: 층별 현황 테이블]                          │  │
│  │ ┌──────┬───────────┬────────────┬─────────────┐     │  │
│  │ │ 층   │ 용도      │ 면적(㎡)   │ 구조        │     │  │
│  │ ├──────┼───────────┼────────────┼─────────────┤     │  │
│  │ │ 1F   │ 근린생활  │ 500        │ RC조        │     │  │
│  │ └──────┴───────────┴────────────┴─────────────┘     │  │
│  └────────────────────────────────────────────────────┘  │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### 1.2 핵심 컴포넌트
- **AddressSearch:** Daum 우편번호 서비스(스크립트)를 활용한 주소 검색 팝업.
  - 사용자가 선택한 주소에서 `sigunguCode` (시군구코드), `bjdongCode` (법정동코드), `bunji` (번지/지) 정보를 추출.
- **ReportViewer:** 조회된 데이터를 시각화하는 메인 컨테이너.
- **MetricCard:** 건폐율, 용적률 등 수치를 강조하는 카드.
- **StatusBadge:** 위반건축물 여부를 색상(Red/Green)으로 표시.

## 2. API 및 데이터 흐름 (Data Flow)

### 2.1 외부 API 연동
- **주소 검색:** `Daum 우편번호 서비스` (Client-side Script)
  - `sigunguCode`: 5자리 행정구역코드
  - `bjdongCode`: 5자리 법정동코드 (전체 10자리 중 뒤 5자리)
  - `jibunAddress`: 번지 및 호 정보 파싱
- **건축물 정보:** `공공데이터포털 - 건축물대장 정보 서비스`
  - 표제부: `getBrTitleInfo`
  - 층별개요: `getBrFlrOvrInfo`

### 2.2 내부 API (Next.js API Route)
- `GET /api/building-report?sigunguCd=11110&bjdongCd=10100&bun=0110&ji=0000`
  - 브라우저의 CORS 문제를 방지하기 위해 Server-side Proxy 역할 수행.

## 3. 구현 세부 사항 (Implementation Details)

### 3.1 Styling
- **A4 Print Support:** `@media print` 쿼리를 사용하여 출력 시 불필요한 UI(검색바 등) 제거 및 여백 최적화.
- **Tailwind CSS:** 리포트 디자인 시스템 구축.

### 3.2 Error Handling
- 데이터가 없는 경우 (미등기 건물 등) 사용자에게 안내 메시지 표시.
- 공공데이터 API 타임아웃 및 할당량 초과 대응.

## 4. 작업 목록 (Task List)
- [ ] 주소 검색 컴포넌트 구현
- [ ] Server-side API Proxy 구현 (건축물대장 API 연동)
- [ ] 리포트 시각화 레이아웃 (A4 최적화)
- [ ] PDF 저장/인쇄 기능 테스트
